╔════════════════════════════════════════════════════════════════╗
║           VIDEO CALL FIX - DEPLOYMENT CHECKLIST                ║
╚════════════════════════════════════════════════════════════════╝

THE PROBLEM:
  Netlify = Static hosting only
  Your app needs Node.js servers for video calls
  
THE SOLUTION:
  Deploy backend separately to Render (free)

╔════════════════════════════════════════════════════════════════╗
║ STEP 1: DEPLOY BACKEND TO RENDER                              ║
╚════════════════════════════════════════════════════════════════╝

□ Go to https://render.com
□ Sign up with GitHub
□ Click "New +" → "Web Service"
□ Select your repository
□ Configure:
    Build Command: npm install
    Start Command: npm start
□ Click "Create Web Service"
□ Wait 5-10 minutes for deployment
□ Copy your Render URL: _________________________________

╔════════════════════════════════════════════════════════════════╗
║ STEP 2: ADD ENVIRONMENT VARIABLES TO NETLIFY                  ║
╚════════════════════════════════════════════════════════════════╝

□ Go to Netlify Dashboard
□ Select your site
□ Site settings → Environment variables
□ Click "Add a variable" and add these 5 variables:

  Variable 1:
    Key: NEXT_PUBLIC_SOCKET_URL
    Value: https://YOUR-RENDER-URL.onrender.com
  
  Variable 2:
    Key: NEXT_PUBLIC_PEER_HOST
    Value: 0.peerjs.com
  
  Variable 3:
    Key: NEXT_PUBLIC_PEER_PORT
    Value: 443
  
  Variable 4:
    Key: NEXT_PUBLIC_PEER_PATH
    Value: /
  
  Variable 5:
    Key: NEXT_PUBLIC_PEER_SECURE
    Value: true

□ Save all variables

╔════════════════════════════════════════════════════════════════╗
║ STEP 3: REDEPLOY NETLIFY                                      ║
╚════════════════════════════════════════════════════════════════╝

□ Go to "Deploys" tab
□ Click "Trigger deploy"
□ Select "Deploy site"
□ Wait for deployment to complete

╔════════════════════════════════════════════════════════════════╗
║ STEP 4: TEST VIDEO CALL                                       ║
╚════════════════════════════════════════════════════════════════╝

□ Open your Netlify site
□ Sign in as Doctor
□ Click "Start New Consultation"
□ Copy the room code
□ Open in another browser/device (or incognito)
□ Sign in as Patient
□ Enter room code and join
□ Allow camera/microphone permissions
□ Video call should connect!

╔════════════════════════════════════════════════════════════════╗
║ TROUBLESHOOTING                                                ║
╚════════════════════════════════════════════════════════════════╝

Issue: First connection takes 30-60 seconds
  → Normal! Render free tier wakes up from sleep

Issue: "Connection error" in browser
  → Check Render backend is running (visit Render URL)
  → Verify environment variables in Netlify
  → Check browser console (F12) for errors

Issue: "Camera access denied"
  → Allow camera/microphone in browser settings
  → Use HTTPS (both Netlify and Render provide this)

Issue: Video not connecting
  → Wait 60 seconds for Render to wake up
  → Check both users are in same room
  → Try refreshing the page

╔════════════════════════════════════════════════════════════════╗
║ IMPORTANT NOTES                                                ║
╚════════════════════════════════════════════════════════════════╝

✓ Render free tier sleeps after 15 min inactivity
✓ First connection takes 30-60 sec to wake up
✓ For production, upgrade to Render paid ($7/mo)
✓ PeerJS cloud is free but has usage limits

╔════════════════════════════════════════════════════════════════╗
║ NEED MORE HELP?                                                ║
╚════════════════════════════════════════════════════════════════╝

See these files for detailed guides:
  → QUICK_FIX.md - 5-minute guide
  → DEPLOYMENT_GUIDE.md - Detailed instructions
  → NETLIFY_VIDEO_FIX_SUMMARY.md - What was changed

Check browser console (F12) for error messages
